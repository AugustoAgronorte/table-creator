<div class="container">
    <div *ngIf="this.isLoading" class="card d-flex justify-content-center align-items-center mt-4 bg-secondary">
      <h2>GENERANDO MODELOS Y SERIALIZADORES</h2>
      <div  class="loader"></div>
    </div>
    <div *ngIf="!this.isLoading" class="row bg-secondary-subtle p-4 mt-4 rounded rounded--lg d-flex mb-4">
      <h4>FORMULARIO ESPECIFICO DE CREACION DE TABLE-SCHEMA Y TABLE-HEADERS</h4>
      <hr>

      <div class="alert alert-container" *ngIf="showAlert">
        <div class="alert alert-info mt-3">
          Tabla y Headers creados exitosamente
        </div>
      </div>

      <!-- Formulario a la izquierda -->
      <div class="col-md-4">
        <form (submit)="onSubmit(currentPage)">
          <div class="form-group mb-2">
            <label for="api_table_name">Table API name</label>
            <input type="text" class="form-control" id="api_table_name" [(ngModel)]="api_table_name" name="api_table_name" placeholder="tabla_(nombreTablaDB)" required>
          </div>
          <div class="form-group mb-2">
            <label for="table_name">DB table name</label>
            <input type="text" class="form-control" id="table_name" [(ngModel)]="table_name" name="table_name" placeholder="Nombre de tabla en DB" required>
          </div>
          <div class="form-group mb-2">
            <label for="api_path">Path de la api</label>
            <input type="text" class="form-control" id="api_path" [(ngModel)]="api_path" name="api_path" placeholder="/api/search/nombreTablaDB" required>
          </div>
          <div class="form-group mb-2">
            <label for="isForm">¿Tendrá formulario?</label>
            <select type="select" class="form-control" id="isForm" [(ngModel)]="isForm" name="isForm" required>
              <option disabled selected value="">Si (crea form) - No (no crea form)</option>
              <option value="Si">Si</option>
              <option value="No">No</option>
            </select>
          </div>
          <button type="submit"  class="btn btn-primary">Buscar</button>
        </form>

        <div class="bg-white rounded rounded--lg mt-4 shadow-lg" >
            <h3 class="p-2 ">Selección</h3>
            <hr>
            <div  style="max-height: 250px; overflow-y: auto;">
              <ul class="w-100 pe-2">
                <li class="d-flex justify-content-between align-items-center pb-1" *ngFor="let item of selectedItems; let i = index">
                  {{item}}
                  <button class="btn btn-danger d-flex" (click)=" this.selectedItems.splice(i, 1);">Eliminar</button>
                </li>
              </ul>
            </div>

              
        </div>
        <button class="btn btn-primary m-2 ms-0" (click)="createTableSchemaAndHeadersAndForm()">Crear</button>
      </div>

      <div class="col-md-2 mx-auto my-auto">
        <div class="mb-2">
          <button (click)="selectAll()" class="btn btn-warning w-100">Seleccionar todo</button>
        </div>
        <div>
          <button (click)="this.selectedItems=[]" class="btn btn-danger w-100">Eliminar todo</button>
        </div>
      </div>
     

      <div class="col-md-6 bg-white rounded rounded--lg shadow-lg" style="max-height: 560px; min-height: 565px;">
        <h3>Resultados</h3>
        <hr>
        <div class="d-flex flex-column"style="height: 100%;">
          <ul class="w-100" style="max-height: 460px; min-height: 440px; overflow-y: auto;" *ngIf="responseData">
            <li class="d-flex justify-content-between align-items-center pb-1" *ngFor="let key of fieldNames; let i = index ">
              <p>{{key}}</p>
              <button class="btn btn-secondary d-flex" (click)="showSelectedItem(i)" >Agregar</button>
            </li>
          </ul>

          <!-- <div *ngIf="responseData" class="paginator d-flex justify-content-center align-items-bottom ">
            <button class="btn btn-primary" (click)="previousPage()" [disabled]="currentPage === 1">Previous</button>
            <span class="paginator-info">Page {{ currentPage }} of {{ totalPages }}</span>
            <button class="btn btn-primary" (click)="nextPage()" [disabled]="currentPage === totalPages">Next</button>
        </div>           -->
      </div>

    </div>

    <h2></h2>
    <hr>

    <div class="col-md-12">
      <app-general-form></app-general-form>
    </div>
    
  </div>
  

