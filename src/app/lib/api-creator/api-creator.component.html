<div class="row bg-secondary-subtle p-4 mt-4 rounded rounded--lg d-flex mb-4 justify-content-between">
    <!-- Columna para el formulario de ApiDefinition -->
    <div class="col-md-6">
      <form [formGroup]="apiDefinitionForm" (ngSubmit)="onSubmitApiDefinition()">
        <h3>ApiDefinition</h3>
        
  
        <div class="alert alert-container" *ngIf="showAlert">
            <div class="alert alert-info mt-3">
              Exito al crear la ApiDefinition y sus parametros
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="method">Método HTTP:</label>
                <select id="method" class="form-control shadow-lg" formControlName="method" required>
                    <option value="GET">GET</option>
                    <option value="POST">POST</option>
                    <option value="OBJECT">OBJECT</option>
                </select>
                </div>
            </div>
    
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="serializer">Nombre serializer:</label>
                <input id="serializer" class="form-control shadow-lg" formControlName="serializer" type="text" required placeholder="ApiSearch" />
                </div>
            </div>
        </div>
  
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="description">Descripción:</label>
                <input id="description" class="form-control shadow-lg" formControlName="description" type="text" required placeholder="Api general de búsqueda" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="url_list">Url_list:</label>
                <input id="url_list" class="form-control shadow-lg" formControlName="url_list" type="text" required placeholder="urls_api_globals" />
                </div>
            </div>
        </div>
  
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="fun_definition">Definición de función:</label>
                <input id="fun_definition" class="form-control shadow-lg" formControlName="fun_definition" type="text" required placeholder="search_api" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="url_path">Api path:</label>
                <input id="url_path" class="form-control shadow-lg" formControlName="url_path" type="text" required placeholder="api/search/" />
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-2">
                <label for="authenticatable">Autorizable:</label>
                <div class="form-check form-switch pb-2">
                    <input class="form-check-input" type="checkbox" formControlName="authenticatable" id="authenticatable">
                </div>
                </div>
            </div>
        </div>
  
        <button type="submit" class="btn btn-primary mb-4" [disabled]="apiDefinitionForm.invalid">Crear ApiDefinition</button>
      </form>
    

        <form *ngIf="this.isactive"  class="" [formGroup]="apiParameterForm" (ngSubmit)="onSubmitApiParameter()">
            <h5>Agregar ApiParameter</h5>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-2">
                    <label for="field">Campo:</label>
                    <input id="field" class="form-control shadow-lg" formControlName="field" type="text" required placeholder="ApiSearch" />
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group mb-2">
                    <label for="id_parameter_type">Tipo Parámetro:</label>
                    <select id="id_parameter_type" class="form-control shadow-lg" formControlName="id_parameter_type" type="text" required>
                        <option value="1">Primitivo</option>
                        <option value="2">Objeto</option>
                        <option value="3">Modelo</option>
                        <option value="4">Lista</option>
                    </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-2">
                    <label for="data_type">Tipo de datos del parámetro:</label>
                    <select id="data_type" class="form-control shadow-lg" formControlName="data_type" type="text" required>
                        <option value="INTEGER">Integer</option>
                        <option value="DOUBLE">Double</option>
                        <option value="CHAR">Char</option>
                        <option value="BOOLEAN">Boolean</option>
                        <option value="OBJECT">Objeto</option>
                    </select>
                    </div>
                </div>

                <div class="col-md 6">
                    <div class="form-group mb-2">
                    <label for="in_response">¿Response - Request?</label>
                    <select id="in_response" class="form-control shadow-lg" formControlName="in_response" type="text" required>
                        <option value="1">Response</option>
                        <option value="0">Request</option>
                    </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group mb-2">
                        
                        <label for="required">¿Requerido?</label>
                        <div class="form-check form-switch pb-2">
                            <input class="form-check-input" type="checkbox" formControlName="required" id="required">
                        </div>
                    </div>
                </div>

                <div class="col-md-6">
                    <div class="form-group mb-2">
                    <label for="inBody">¿En el body?</label>
                    <div class="form-check form-switch pb-2">
                        <input class="form-check-input" type="checkbox" formControlName="inBody" id="inBody">
                    </div>
                    </div>
                </div>
            </div>

            <div class="col-md-6 d-flex justify-content-between w-100 mt-4">
                <button type="submit" class="btn btn-primary" [disabled]="apiParameterForm.invalid">Agregar ApiParameter</button>
                <button *ngIf="apiParameters.length > 0" type="button" class="btn btn-success me-4" (click)="createdApiParameters()">Crear parámetros</button>
            </div>
        </form>
    </div> 

    <!-- Columna para mostrar resultados -->
    <div class="col-md-6">
      <div *ngFor="let apiDefinition of apidefinitions" class="bg-white rounded rounded--lg shadow-lg mb-4 p-3">
        <h4>ApiDefinition</h4>
        <hr>
        <p><strong>ID:  {{selectedApiDefinitionId}}</strong><strong> - Nombre: {{apiDefinition.serializer}}</strong></p>
        <p><strong>Método HTTP:</strong> {{ apiDefinition.method }}</p>
        <p><strong>Descripción:</strong> {{ apiDefinition.description }}</p>
        <p><strong>Url List:</strong> {{ apiDefinition.url_list }}</p>
        <p><strong>Api path:</strong> {{ apiDefinition.url_path }}</p>
        <p><strong>Definición de Función:</strong> {{ apiDefinition.fun_definition }}</p>
        <p><strong>Autorizable:</strong> {{ apiDefinition.authenticatable ? 'Sí' : 'No' }}</p>
  
        <hr>
  
        <!-- Mostrar ApiParameters -->
        <div style="max-height: 300px; overflow-y: auto;">
          <h6>Parametros:</h6>
          <ul>
            <li *ngFor="let parameter of apiDefinition.apiParameters">
              <p><strong>Campo:</strong> {{ parameter.field }}</p>
              <p *ngIf="parameter.id_parameter_type == 1"><strong>Tipo Parámetro:</strong>Primitivo</p>
              <p *ngIf="parameter.id_parameter_type == 2"><strong>Tipo Parámetro:</strong>Objeto</p>
              <p *ngIf="parameter.id_parameter_type == 3"><strong>Tipo Parámetro:</strong>Modelo</p>
              <p *ngIf="parameter.id_parameter_type == 4"><strong>Tipo Parámetro:</strong>Lista</p>
              <p><strong>Tipo de datos del parámetro:</strong> {{ parameter.data_type }}</p>
              <p><strong>¿Response - Request?</strong> {{ parameter.in_response ? 'Response' : 'Request' }}</p>
              <p><strong>¿Requerido?</strong> {{ parameter.required ? 'Sí' : 'No' }}</p>
              <p><strong>¿En el Body?</strong> {{ parameter.body ? 'Sí' : 'No' }}</p>
              <hr>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  